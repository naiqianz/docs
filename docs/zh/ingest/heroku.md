---
title: Ingesting Heroku Logs into Uptrace
---

# Ingesting Heroku Logs into Uptrace

![Ingest Heroku](/cover/ingest-heroku.png)

You can collect logs from Heroku using Heroku's Logplex and [Vector](/ingest/vector.md). You can then push the collected logs to Uptrace.

Herokuâ€™s Logplex router is responsible for collating and distributing the log entries generated by your app and other components of the Heroku platform. It makes these entries available through the Logplex API and the Heroku command-line tool.

[[toc]]

## Deploying Vector to Heroku

To deploy Vector to Heroku, run the commands below:

```shell
heroku apps:create ${APP_NAME} --buildpack https://github.com/vectordotdev/vector-heroku-buildpack
heroku config:set LOGPLEX_AUTH_USERNAME ${LOGPLEX_AUTH_USERNAME}
heroku config:set LOGPLEX_AUTH_PASSWORD ${LOGPLEX_AUTH_PASSWORD}
```

Then you need to pull down the dyno repo and provision a configuration into it:

```shell
git clone https://git.heroku.com/${APP_NAME}.git
cd ${APP_NAME}
```

## Vector configuration

Next, create a `./vector.toml` config that contains [heroku_logs](https://vector.dev/docs/reference/configuration/sources/heroku_logs/) source and Uptrace sink:

<ProjectPicker v-model="activeProject" :projects="projects" />

<CodeGroup>
  <CodeGroupItem title="Cloud">

```toml:no-v-pre
[sources.heroku]
type = "heroku_logs"
address = "0.0.0.0:${PORT}"
# You can leave these as is!
# Heroku will set the environment variables that you filled while deploying.
auth.username = "${LOGPLEX_AUTH_USERNAME}"
auth.password = "${LOGPLEX_AUTH_PASSWORD}"

[sinks.uptrace]
type = "http"
method = "post"
inputs = ["heroku"]
encoding.codec = "json"
framing.method = "newline_delimited"
compression = "gzip"
request.headers.uptrace-dsn = "{{ dsn }}"
uri = "https://api.uptrace.dev/api/v1/vector/logs"
```

  </CodeGroupItem>
  <CodeGroupItem title="Self-hosted">

```toml
[sources.heroku]
type = "logplex"
address = "0.0.0.0:${PORT}"
# You can leave these as is!
# Heroku will set the environment variables that you filled while deploying.
auth.username = "${LOGPLEX_AUTH_USERNAME}"
auth.password = "${LOGPLEX_AUTH_PASSWORD}"

[sinks.uptrace]
type = "http"
method = "post"
inputs = ["heroku"]
encoding.codec = "json"
framing.method = "newline_delimited"
compression = "gzip"
request.headers.uptrace-dsn = "http://project2_secret_token@localhost:14318?grpc=14317"
uri = "http://localhost:14318/api/v1/vector/logs"
```

  </CodeGroupItem>
</CodeGroup>

When that's all done, you'll need to push up the config:

```shell
git add vector.toml
git commit -sm "Initialize Vector configuration"
git push heroku
```

## Heroku log drain

Then, from your console, set up the log drain to sink to Vector:

```shell
heroku drains:add https://${LOGPLEX_AUTH_USERNAME}:${LOGPLEX_AUTH_PASSWORD}@${VECTOR_INSTANCE_NAME}.herokuapp.com/events -a ${YOUR_APP}
```

<script type="ts">
import { defineComponent  } from 'vue'

import { useProjectPicker } from '@/use/org'

export default defineComponent({
  setup() {
    const { projects, activeProject, dsn } = useProjectPicker()
    return { projects, activeProject, dsn }
  },
})
</script>
